<% const top_announce = cc.config('top-announce').replace(/\[(.*?)\]/g, '<span class="font-semibold bg-background px-1.5 py-0.5 rounded">$1</span>') %>
<% if (top_announce) { %>
  <a class="text-center text-sm sm:text-base w-full bg-primary p-2 flex items-center justify-center gap-3 relative z-10">
    <p class="font-medium"><%~ top_announce %></p>
  </a>
<% } %>

<header class="sticky top-0 backdrop-blur-md z-20 py-6 border-b bg-background/80">
  <div class="container mx-auto max-w-screen-xl">
    <nav class="flex items-center justify-between sm:flex-row">
      <div class="flex items-center justify-between w-full sm:w-auto">
        <a href="/">
          <% if (cc.theme.logo) { %>
            <img src="<%= cc.theme.logo %>" class="w-[50px] h-[50px] object-contain" />
          <% } else { %>
            <h1 class="text-lg font-bold text-white">
              <%= cc.store.name %>
            </h1>
          <% } %>
        </a>

        <div class="ms-6 relative hidden md:block">
          <i class="fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground font-semibold pointer-events-none"></i>
          <input 
            autocomplete="off" 
            id="search-bar" 
            placeholder="Buscar produto" 
            class="transition-all ps-9 placeholder:text-muted-foreground border-2 border-white/5 rounded-full h-10 w-[410px] bg-white/5" 
          />

          <div id="search-portal" class="absolute top-12 left-0 w-[410px] z-50">
            <div class="relative">
              <div 
                id="search-result" 
                class="max-h-[400px] w-full border bg-background/50 border-white/10 
                backdrop-blur-md rounded-xl overflow-auto hidden"
              >
              </div>
            </div>
          </div>
        </div>
      </div>
      <ul class="hidden sm:flex gap-3 items-center text-sm">
        <li>
          <a class="py-2 px-3 font-medium text-muted-foreground hover:text-foreground transition-colors duration-200" href="/#store">
            Produtos
          </a>
        </li>
        <li>
          <a class="py-2 px-3 font-medium text-muted-foreground hover:text-foreground transition-colors duration-200" href="/terms">
            Termos de servi√ßo
          </a>
        </li>
        <li>
          <button onclick="openCart()" class="py-2 px-3 font-semibold hover:bg-primary/85 transition-colors bg-primary rounded-md flex gap-2 items-center">
            <i data-lucide="shopping-cart" class="w-4 h-4"></i>
            Carrinho
          </button>
        </li>
      </ul>

      <ul class="flex sm:hidden">
        <li>
          <button onclick="openCart()" class="w-9 h-9 font-semibold hover:bg-primary/85 transition-colors bg-primary rounded-md flex gap-2 items-center justify-center">
            <i data-lucide="shopping-cart" class="w-4 h-4"></i>
          </button>
        </li>
      </ul>
    </nav>

    <div class="relative mt-2 md:hidden">
      <i class="fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground font-semibold pointer-events-none"></i>
      <input 
        autocomplete="off" 
        id="search-bar-mobile" 
        placeholder="Buscar produto" 
        class="transition-all ps-9 placeholder:text-muted-foreground border-2 border-white/5 rounded-full w-full h-10 bg-white/5" 
      />

      <div id="search-portal-mobile" class="absolute top-12 left-0 w-full z-50">
        <div class="relative">
          <div 
            id="search-result-mobile" 
            class="max-h-[400px] w-full border bg-background/50 border-white/10 
            backdrop-blur-md rounded-xl overflow-auto hidden"
          >
          </div>
        </div>
      </div>
    </div>
  </div>
</header>